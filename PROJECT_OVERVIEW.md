# UNSW AI RAG é¡¹ç›®æ¦‚è§ˆ

## ğŸ“Š é¡¹ç›®çŠ¶æ€

âœ… **æ•°æ®æ”¶é›†å®Œæˆ** - å·²æˆåŠŸçˆ¬å–å’Œå¤„ç†æ‰€æœ‰æ•°æ®
âœ… **Pipeline æ•´ç†å®Œæˆ** - ä»£ç ç»“æ„æ¸…æ™°ï¼Œå¯å¤ç°
âœ… **æ•°æ®å·²å°±ç»ª** - å¯ç›´æ¥å¯¼å…¥æ•°æ®åº“ä½¿ç”¨

---

## ğŸ¯ é¡¹ç›®ç›®æ ‡

æ„å»º UNSW Engineering å­¦é™¢çš„æ•™èŒå‘˜å·¥å’Œç§‘ç ”æˆæœçŸ¥è¯†åº“ï¼Œç”¨äº RAG (Retrieval-Augmented Generation) ç³»ç»Ÿã€‚

---

## ğŸ“ é¡¹ç›®ç»“æ„

```
unsw_ai_rag/
â”‚
â”œâ”€â”€ pipeline/                           # ğŸ”§ æ ¸å¿ƒæ•°æ®å¤„ç†æµç¨‹
â”‚   â”œâ”€â”€ step1_fetch_staff.py               â†³ çˆ¬å– staff åŸºæœ¬ä¿¡æ¯å’Œè¯¦ç»† profile
â”‚   â”œâ”€â”€ step2_parse_publications.py        â†³ è§£æ publicationsï¼Œè·å– abstract
â”‚   â””â”€â”€ step3_import_to_database.py        â†³ å¯¼å…¥æ•°æ®åˆ° PostgreSQL
â”‚
â”œâ”€â”€ database/                           # ğŸ’¾ æ•°æ®åº“æ¨¡å—
â”‚   â”œâ”€â”€ rag_schema.py                      â†³ RAG æ•°æ®åº“è¡¨ç»“æ„ (staff, publications, chunks)
â”‚   â”œâ”€â”€ schema.py                          â†³ æ—§ç‰ˆè¡¨ç»“æ„
â”‚   â”œâ”€â”€ db.py                              â†³ æ•°æ®åº“è¿æ¥å·¥å…·
â”‚   â””â”€â”€ models.py                          â†³ æ•°æ®æ¨¡å‹
â”‚
â”œâ”€â”€ config/                             # âš™ï¸ é…ç½®æ–‡ä»¶
â”‚   â”œâ”€â”€ settings.py                        â†³ æ•°æ®åº“è¿æ¥ã€API é…ç½®
â”‚   â””â”€â”€ __init__.py
â”‚
â”œâ”€â”€ data/                               # ğŸ“‚ æ•°æ®æ–‡ä»¶
â”‚   â”œâ”€â”€ processed/                         â†³ å¤„ç†å®Œæˆçš„æ•°æ®
â”‚   â”‚   â”œâ”€â”€ staff_with_profiles.json       (32 MB - 278 ä½ staff è¯¦ç»†ä¿¡æ¯)
â”‚   â”‚   â””â”€â”€ rag_chunks.json                (167 MB - 27,000+ ä¸ª RAG chunks)
â”‚   â”œâ”€â”€ cache/                             â†³ è¿›åº¦å’Œç¼“å­˜æ–‡ä»¶
â”‚   â”‚   â”œâ”€â”€ parsing_progress.json          (99 MB - åŒ…å«æ‰€æœ‰ publication çš„ç¼“å­˜)
â”‚   â”‚   â”œâ”€â”€ parsing_statistics.json        (690 KB - è¯¦ç»†ç»Ÿè®¡ä¿¡æ¯)
â”‚   â”‚   â””â”€â”€ parsing.log                    (æ—¥å¿—æ–‡ä»¶)
â”‚   â””â”€â”€ raw/                               â†³ åŸå§‹æ•°æ® (é¢„ç•™)
â”‚
â”œâ”€â”€ ingestor/                           # ğŸ”„ æ•°æ®è·å–æ¨¡å— (æ—§ç‰ˆ)
â”‚   â”œâ”€â”€ staff_fetcher.py                   â†³ ä» Funnelback API è·å– staff
â”‚   â”œâ”€â”€ publication_fetcher.py             â†³ è·å– publications
â”‚   â””â”€â”€ utils.py
â”‚
â”œâ”€â”€ scripts/                            # ğŸ› ï¸ è¾…åŠ©è„šæœ¬
â”‚   â”œâ”€â”€ import_chunks_to_db.py             â†³ å¯¼å…¥ chunks åˆ°æ•°æ®åº“ (æ—§ç‰ˆ)
â”‚   â”œâ”€â”€ init_database.py                   â†³ åˆå§‹åŒ–æ•°æ®åº“
â”‚   â””â”€â”€ ...
â”‚
â”œâ”€â”€ archive/                            # ğŸ“¦ å½’æ¡£æ–‡ä»¶
â”‚   â”œâ”€â”€ old_scripts/                       â†³ æ—§ç‰ˆè„šæœ¬ (17ä¸ª)
â”‚   â”œâ”€â”€ old_data/                          â†³ æ—§ç‰ˆæ•°æ®æ–‡ä»¶ (13ä¸ª)
â”‚   â””â”€â”€ old_docs/                          â†³ æ—§ç‰ˆæ–‡æ¡£ (8ä¸ª)
â”‚
â”œâ”€â”€ rag/                                # ğŸ§  RAG ç³»ç»Ÿ (å¾…å®ç°)
â”‚   â”œâ”€â”€ embeddings.py                      â†³ å‘é‡åµŒå…¥ç”Ÿæˆ
â”‚   â”œâ”€â”€ retrieval.py                       â†³ å‘é‡æ£€ç´¢
â”‚   â””â”€â”€ ...
â”‚
â”œâ”€â”€ api/                                # ğŸŒ API æ¥å£ (å¾…å®ç°)
â”‚   â””â”€â”€ routes/
â”‚
â”œâ”€â”€ tests/                              # ğŸ§ª æµ‹è¯•æ–‡ä»¶
â”‚
â”œâ”€â”€ run_pipeline.sh                     # â–¶ï¸ ä¸»æ‰§è¡Œè„šæœ¬
â”œâ”€â”€ organize_files.sh                   # ğŸ—‚ï¸ æ–‡ä»¶æ•´ç†è„šæœ¬
â”œâ”€â”€ PIPELINE_README.md                  # ğŸ“– è¯¦ç»†ä½¿ç”¨æ–‡æ¡£
â”œâ”€â”€ PROJECT_OVERVIEW.md                 # ğŸ“‹ æœ¬æ–‡æ¡£
â”œâ”€â”€ README.md                           # ğŸ“ é¡¹ç›®ç®€ä»‹
â””â”€â”€ requirements.txt                    # ğŸ“¦ Python ä¾èµ–
```

---

## ğŸ”„ å®Œæ•´æ•°æ®æµç¨‹

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Step 1: çˆ¬å– Staff æ•°æ®                                          â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  è¾“å…¥: Funnelback API                                            â”‚
â”‚  å¤„ç†:                                                            â”‚
â”‚    1. ä» API è·å– 278 ä½ Engineering staff åŸºæœ¬ä¿¡æ¯               â”‚
â”‚    2. çˆ¬å–æ¯ä½ staff çš„è¯¦ç»† profile é¡µé¢                          â”‚
â”‚    3. æå– publications, ç ”ç©¶å…´è¶£, ä¸ªäººç®€ä»‹ç­‰                     â”‚
â”‚  è¾“å‡º: data/processed/staff_with_profiles.json (32 MB)          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                              â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Step 2: è§£æ Publications å¹¶è·å– Abstract                       â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  è¾“å…¥: staff_with_profiles.json                                 â”‚
â”‚  å¤„ç†:                                                            â”‚
â”‚    1. è§£æ publication æ–‡æœ¬ï¼Œæå– DOI å’Œæ ‡é¢˜                      â”‚
â”‚    2. ä»å¤šä¸ªæºè·å– abstract:                                      â”‚
â”‚       â€¢ OpenAlex (ä¼˜å…ˆ) - æœ€å…¨é¢çš„ metadata                      â”‚
â”‚       â€¢ Semantic Scholar - é«˜è´¨é‡ abstract + TLDR               â”‚
â”‚       â€¢ Crossref - æƒå¨å‡ºç‰ˆæ•°æ®                                   â”‚
â”‚       â€¢ PubMed - ç”Ÿç‰©åŒ»å­¦è®ºæ–‡                                     â”‚
â”‚    3. ç”Ÿæˆ RAG chunks (5 ç§ç±»å‹)                                 â”‚
â”‚  ç‰¹æ€§:                                                            â”‚
â”‚    â€¢ å¤šçº¿ç¨‹å¤„ç† (5 ä¸ªå¹¶å‘)                                        â”‚
â”‚    â€¢ æ–­ç‚¹ç»­ä¼                                                      â”‚
â”‚    â€¢ æ™ºèƒ½ç¼“å­˜ (é¿å…é‡å¤ API è¯·æ±‚)                                 â”‚
â”‚  è¾“å‡º: data/processed/rag_chunks.json (167 MB)                  â”‚
â”‚        data/cache/parsing_progress.json (99 MB)                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                              â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Step 3: å¯¼å…¥åˆ°æ•°æ®åº“                                             â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  è¾“å…¥: rag_chunks.json                                          â”‚
â”‚  å¤„ç†:                                                            â”‚
â”‚    1. åˆ›å»ºæ•°æ®åº“è¡¨ (staff, publications, chunks, embeddings)    â”‚
â”‚    2. æ‰¹é‡å¯¼å…¥æ•°æ® (æ¯ 1000 æ¡æäº¤ä¸€æ¬¡)                           â”‚
â”‚    3. å»ºç«‹å¤–é”®å…³è”                                                â”‚
â”‚  è¾“å‡º: PostgreSQL æ•°æ®åº“                                         â”‚
â”‚        â€¢ staff è¡¨: 278 æ¡è®°å½•                                     â”‚
â”‚        â€¢ publications è¡¨: ~5,000 æ¡è®°å½•                          â”‚
â”‚        â€¢ chunks è¡¨: ~27,000 æ¡è®°å½•                               â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ“Š æ•°æ®ç»Ÿè®¡

### Staff æ•°æ®
- **æ€»äººæ•°**: 278 ä½ UNSW Engineering staff
- **æ•°æ®å®Œæ•´åº¦**:
  - æœ‰ publications: ~180 ä½ (65%)
  - æœ‰ biography: ~220 ä½ (79%)
  - æœ‰è¯¦ç»† profile: 278 ä½ (100%)

### Publications æ•°æ®
- **æ€»è®ºæ–‡æ•°**: ~7,000 ç¯‡
- **æœ‰ DOI**: ~4,500 ç¯‡ (64%)
- **è·å–åˆ° Abstract**: ~3,200 ç¯‡ (46%)

**Abstract æ¥æºåˆ†å¸ƒ**:
- OpenAlex: 70%
- Semantic Scholar: 15%
- Crossref: 10%
- PubMed: 5%

### RAG Chunks æ•°æ®
- **æ€» Chunk æ•°**: 27,000+
- **Chunk ç±»å‹åˆ†å¸ƒ**:
  - `person_basic`: 278 (æ¯ä½ staff ä¸€ä¸ª)
  - `person_biography`: 220 (æœ‰ç®€ä»‹çš„ staff)
  - `publication_title`: ~7,000 (æ¯ç¯‡è®ºæ–‡ä¸€ä¸ª)
  - `publication_abstract`: ~3,200 (æœ‰ abstract çš„è®ºæ–‡)
  - `publication_keywords`: ~2,500 (æœ‰å…³é”®è¯çš„è®ºæ–‡)

---

## ğŸš€ å¿«é€Ÿå¼€å§‹

### 1. ç¯å¢ƒé…ç½®

```bash
# å®‰è£…ä¾èµ–
pip3 install -r requirements.txt

# é…ç½®æ•°æ®åº“
ç¼–è¾‘ config/settings.py
```

### 2. è¿è¡Œå®Œæ•´æµç¨‹

```bash
# æ–¹å¼ 1: ä½¿ç”¨ shell è„šæœ¬ (æ¨è)
./run_pipeline.sh

# æ–¹å¼ 2: å•ç‹¬è¿è¡Œæ¯ä¸ªæ­¥éª¤
python3 pipeline/step1_fetch_staff.py
python3 pipeline/step2_parse_publications.py
python3 pipeline/step3_import_to_database.py
```

### 3. æŸ¥çœ‹æ•°æ®

```bash
# è¿›å…¥æ•°æ®åº“
psql -U rag_user -d unsw_rag

# æŸ¥è¯¢ç¤ºä¾‹
SELECT COUNT(*) FROM staff;
SELECT COUNT(*) FROM publications;
SELECT COUNT(*) FROM chunks;
```

è¯¦ç»†ä½¿ç”¨æ–¹æ³•è¯·æŸ¥çœ‹: [PIPELINE_README.md](PIPELINE_README.md)

---

## ğŸ” æ•°æ®åº“è¡¨ç»“æ„

### staff è¡¨
- `email` (ä¸»é”®)
- `full_name`, `first_name`, `last_name`
- `role`, `school`, `faculty`
- `biography`, `research_text`
- `profile_url`, `photo_url`

### publications è¡¨
- `id` (ä¸»é”®, DOI æˆ– hash)
- `title`, `doi`, `publication_year`
- `authors` (JSON), `venue`
- `abstract`, `abstract_source`
- `citations_count`, `is_open_access`
- `staff_email` (å¤–é”® â†’ staff)

### chunks è¡¨
- `chunk_id` (ä¸»é”®)
- `chunk_type` (person_basic/publication_abstract/...)
- `content` (æ–‡æœ¬å†…å®¹)
- `chunk_metadata` (JSON)
- `staff_email` (å¤–é”® â†’ staff)
- `publication_id` (å¤–é”® â†’ publications)

### embeddings è¡¨ (å¾…å®ç°)
- `chunk_id` (ä¸»é”®, å¤–é”® â†’ chunks)
- `vector` (å‘é‡åµŒå…¥)
- `model` (åµŒå…¥æ¨¡å‹åç§°)

---

## âœ… å·²å®ŒæˆåŠŸèƒ½

- âœ… çˆ¬å– UNSW Engineering æ‰€æœ‰ staff æ•°æ®
- âœ… çˆ¬å–æ¯ä½ staff çš„è¯¦ç»† profile
- âœ… è§£æ publications å¹¶æå– DOI
- âœ… ä»å¤šä¸ªæºè·å– abstract (OpenAlex, Semantic Scholar, Crossref, PubMed)
- âœ… ç”Ÿæˆ RAG chunks
- âœ… æ•°æ®åº“ schema è®¾è®¡
- âœ… æ•°æ®å¯¼å…¥åŠŸèƒ½
- âœ… æ–­ç‚¹ç»­ä¼ å’Œè¿›åº¦ä¿å­˜
- âœ… å¤šçº¿ç¨‹å¤„ç†
- âœ… å®Œæ•´çš„æ—¥å¿—å’Œç»Ÿè®¡

---

## ğŸ”œ å¾…å®ç°åŠŸèƒ½

### çŸ­æœŸç›®æ ‡
1. **ç”Ÿæˆ Embeddings** - ä¸ºæ‰€æœ‰ chunks ç”Ÿæˆå‘é‡åµŒå…¥
2. **å‘é‡æ£€ç´¢** - å®ç°åŸºäºç›¸ä¼¼åº¦çš„è¯­ä¹‰æœç´¢
3. **RAG API** - æä¾›é—®ç­”æ¥å£

### ä¸­æœŸç›®æ ‡
4. **çŸ¥è¯†å›¾è°±** - æ„å»º staff å’Œ publications çš„å…³ç³»ç½‘ç»œ
5. **ç ”ç©¶é¢†åŸŸåˆ†æ** - åŸºäº publications åˆ†æç ”ç©¶æ–¹å‘
6. **åˆä½œç½‘ç»œ** - è¯†åˆ«åˆä½œå…³ç³»

### é•¿æœŸç›®æ ‡
7. **Web ç•Œé¢** - å¯è§†åŒ–æŸ¥è¯¢å’Œæµè§ˆ
8. **å®æ—¶æ›´æ–°** - å®šæœŸæ›´æ–°æœ€æ–°æ•°æ®
9. **å¤šè¯­è¨€æ”¯æŒ** - æ”¯æŒä¸­è‹±æ–‡æŸ¥è¯¢

---

## ğŸ“ æ–‡æ¡£ç´¢å¼•

- **[PIPELINE_README.md](PIPELINE_README.md)** - è¯¦ç»†çš„ä½¿ç”¨æ–‡æ¡£å’Œæ•…éšœæ’é™¤
- **[PROJECT_OVERVIEW.md](PROJECT_OVERVIEW.md)** - æœ¬æ–‡æ¡£ï¼Œé¡¹ç›®æ¦‚è§ˆ
- **[README.md](README.md)** - é¡¹ç›®ç®€ä»‹
- **archive/old_docs/** - æ—§ç‰ˆæ–‡æ¡£å½’æ¡£

---

## ğŸ¤ è´¡çŒ®

æ¬¢è¿æ Issue æˆ– Pull Requestï¼

---

## ğŸ“§ è”ç³»æ–¹å¼

å¦‚æœ‰é—®é¢˜ï¼Œè¯·è”ç³»é¡¹ç›®ç»´æŠ¤è€…ã€‚

---

æœ€åæ›´æ–°: 2024-12-18
